/**
 * Angular-Validation Directive and Service (ghiscoding)
 * http://github.com/ghiscoding/angular-validation
 * @author: Ghislain B.
 * @version: 1.3.38
 * @license: MIT
 * @build: Tue Jul 28 2015 20:23:01 GMT-0400 (Eastern Daylight Time)
 */
angular.module("ghiscoding.validation",["pascalprecht.translate"]).directive("validation",["$timeout","validationCommon",function(e,i){return{restrict:"A",require:"ngModel",link:function(a,t,n,l){function o(e){var i=f.getFormElementByName(l.$name);i.isValidationCancelled?l.$setValidity("validation",!0):d(e.target.value,10)}function d(i,n){var o="undefined"!=typeof n?n:f.typingLimit,d=f.getFormElementByName(l.$name);return f.validate(i,!1),f.isFieldRequired()||""!==i&&null!==i&&"undefined"!=typeof i?(d&&(d.isValidationCancelled=!1),(i||f.isFieldRequired())&&l.$setValidity("validation",!1),""!==i&&"undefined"!=typeof i||"NUMBER"!==t.prop("type").toUpperCase()?"SELECT"===t.prop("tagName").toUpperCase()?(l.$setValidity("validation",f.validate(i,!0)),i):("undefined"!=typeof i&&(f.updateErrorMsg(""),e.cancel(m),m=e(function(){a.$evalAsync(l.$setValidity("validation",f.validate(i,!0)))},o)),i):(e.cancel(m),l.$setValidity("validation",f.validate(i,!0)),i)):(u(),i)}function r(){l.$formatters.shift(),l.$parsers.shift(),u(),f.removeFromValidationSummary(n.name)}function u(){var i=f.getFormElementByName(l.$name);i&&(i.isValidationCancelled=!0),e.cancel(m),f.updateErrorMsg(""),l.$setValidity("validation",!0),"function"==typeof o&&t.unbind("blur",o)}function s(){var e=l.$viewValue||"";l.$setValidity("validation",f.validate(e,!1));var i=f.getFormElementByName(l.$name);i&&(i.isValidationCancelled=!1),t.bind("blur",o)}var m,o,f=new i(a,t,n,l);l.$formatters.unshift(d),l.$parsers.unshift(d),n.$observe("disabled",function(e){e?(u(),f.removeFromValidationSummary(n.name)):s()}),t.on("$destroy",function(){r()}),a.$watch(function(){return t.attr("validation")},function(e){"undefined"==typeof e||""===e?r():(f.defineValidation(),s())}),t.bind("blur",o)}}}]);
angular.module("ghiscoding.validation").factory("validationCommon",["$rootScope","$timeout","$translate","validationRules",function(t,e,a,r){function n(){var t=this,e={};t.validators=[],t.typingLimit=U,t.validatorAttrs.hasOwnProperty("debounce")?t.typingLimit=parseInt(t.validatorAttrs.debounce,10):t.validatorAttrs.hasOwnProperty("typingLimit")?t.typingLimit=parseInt(t.validatorAttrs.typingLimit,10):q&&q.hasOwnProperty("debounce")&&(t.typingLimit=parseInt(q.debounce,10));var a=t.validatorAttrs.hasOwnProperty("rules")?t.validatorAttrs.rules:t.validatorAttrs.validation;if(a.indexOf("pattern=/")>=0){var n=a.match(/pattern=(\/.*?\/[igm]*)(:alt=(.*))?/);if(!n||n.length<3)throw'Regex validator within the validation needs to be define with an opening "/" and a closing "/", please review your validator.';var i=n[1],o=n[2]?n[2].replace(/\|(.*)/,""):"",l=i.match(new RegExp("^/(.*?)/([gimy]*)$")),s=new RegExp(l[1],l[2]);e={altMsg:o,message:o.replace(/:alt=/,""),pattern:s},a=a.replace("pattern="+i,"pattern")}else if(a.indexOf("regex:")>=0){var n=a.match("regex:(.*?):regex");if(n.length<2)throw'Regex validator within the validation needs to be define with an opening "regex:" and a closing ":regex", please review your validator.';var p=n[1].split(":=");e={message:p[0],pattern:p[1]},a=a.replace(n[0],"regex:")}var d=a.split("|");if(d){t.bFieldRequired=a.indexOf("required")>=0?!0:!1;for(var m=0,u=d.length;u>m;m++){var c=d[m].split(":"),f=d[m].indexOf("alt=")>=0?!0:!1;t.validators[m]=r.getElementValidators({altText:f===!0?2===c.length?c[1]:c[2]:"",customRegEx:e,rule:c[0],ruleParams:f&&2===c.length?null:c[1]})}}return t}function i(t){return O(k,"fieldName",t)}function o(t){return t?S(k,"formName",t):k}function l(){return q}function s(t,e,a,r){this.scope=t,this.elm=e,this.ctrl=r,this.validatorAttrs=a,y(e,a,r,t),this.defineValidation()}function p(){var t=this;return t.bFieldRequired}function d(t,e){var a={};for(var r in t)a[r]=t[r];for(var r in e)a[r]=e[r];return a}function m(t){var e=A(k,"fieldName",t);e>=0&&k.splice(e,1)}function u(t,e){var a=this,r=x(t,a),n=e?e:P,i=A(n,"field",t);if(i>=0&&n.splice(i,1),i=A(P,"field",t),i>=0&&P.splice(i,1),a.scope.$validationSummary=P,r&&(r.$validationSummary=S(P,"formName",r.$name)),q&&q.controllerAs&&(q.controllerAs.$validationSummary=P,r)){var o=r.$name.indexOf(".")>=0?r.$name.split(".")[1]:r.$name;q.controllerAs[o].$validationSummary=S(P,"formName",r.$name)}return P}function c(t){L=t}function f(t){q.displayOnlyLastErrorMsg=t}function g(t){var e=this;return q=d(q,t),e}function v(t,e){var r=this;e&&e.obj&&(r=e.obj,r.validatorAttrs=e.obj.attrs);var n=e&&e.elm?e.elm:r.elm,i=n&&n.attr("name")?n.attr("name"):null;if("undefined"==typeof i||null===i){var o=n?n.attr("ng-model"):"unknown";throw'Angular-Validation Service requires you to have a (name="") attribute on the element to validate... Your element is: ng-model="'+o+'"'}var l=e&&e.translate?a.instant(t):t,s=i.replace(/[|&;$%@"<>()+,\[\]\{\}]/g,""),p=null;if(r.validatorAttrs&&r.validatorAttrs.hasOwnProperty("validationErrorTo")){var d=r.validatorAttrs.validationErrorTo.charAt(0),m="."===d||"#"===d?r.validatorAttrs.validationErrorTo:"#"+r.validatorAttrs.validationErrorTo;p=angular.element(document.querySelector(m))}p&&0!==p.length||(p=angular.element(document.querySelector(".validation-"+s)));var u=e&&e.isSubmitted?e.isSubmitted:!1;e&&!e.isValid&&(u||r.ctrl.$dirty||r.ctrl.$touched)?p.length>0?p.text(l):n.after('<span class="validation validation-'+s+' text-danger">'+l+"</span>"):p.text("")}function h(t,e){var r,n,o=this,l=!0,s=!0,p="";"undefined"==typeof t&&(t="");for(var d=o.ctrl&&o.ctrl.$name?o.ctrl.$name:o.attrs&&o.attrs.name?o.attrs.name:o.elm.attr("name"),m=i(d),u=o.validatorAttrs.hasOwnProperty("rules")?o.validatorAttrs.rules:o.validatorAttrs.validation,c=0,f=o.validators.length;f>c;c++){if(n=o.validators[c],"conditionalDate"===n.type){if(r=new RegExp(n.pattern),l=(!n.pattern||"/\\S+/"===n.pattern.toString()||u&&"required"===n.pattern)&&null===t?!1:r.test(t)){var g=n.dateType,v=w(t,g).getTime();if(2==n.params.length){var h=w(n.params[0],g).getTime(),y=w(n.params[1],g).getTime(),O=N(n.condition[0],v,h),S=N(n.condition[1],v,y);l=O&&S?!0:!1}else{var A=w(n.params[0],g).getTime();l=N(n.condition,v,A)}}}else if("conditionalNumber"===n.type)if(2==n.params.length){var O=N(n.condition[0],parseFloat(t),parseFloat(n.params[0])),S=N(n.condition[1],parseFloat(t),parseFloat(n.params[1]));l=O&&S?!0:!1}else l=N(n.condition,parseFloat(t),parseFloat(n.params[0]));else if("match"===n.type){var E=n.params[0],x=o.scope.$eval(E);l=x===t&&!!t}else if("remote"===n.type){if(t&&e){o.ctrl.$processing=!0;var R=null,V=n.params[0];if(-1===V.indexOf("."))R=o.scope[V];else{var T=V.split(".");R=o.scope;for(var F=0,L=T.length;L>F;F++)R=R[T[F]]}var U="function"==typeof R?R():null;if(M.length>1)for(;M.length>0;){var k=M.pop();"function"==typeof k.abort&&k.abort()}if(M.push(U),!U||"function"!=typeof U.then)throw"Remote Validation requires a declared function (in your Controller) which also needs to return a Promise, please review your code.";o.ctrl.$setValidity("remote",!1),function(t){U.then(function(a){a=a.data||a,M.pop(),o.ctrl.$processing=!1;var r=p+" ";"boolean"==typeof a?l=a?!0:!1:"object"==typeof a&&(l=a.isValid?!0:!1),l===!1&&(m.isValid=!1,r+=a.message?a.message:t,b(o,m,r,!1,e)),l===!0&&s===!0&&(m.isValid=!0,o.ctrl.$setValidity("remote",!0),b(o,m,"",!0,e))})}(n.altText)}}else{var P="undefined"!=typeof o.attrs?o.attrs.ngDisabled:o.validatorAttrs.ngDisabled;o.elm.prop("disabled")||o.scope.$eval(P)?l=!0:"string"==typeof t&&""===t&&"NUMBER"===o.elm.prop("type").toUpperCase()?l=!1:(r=new RegExp(n.pattern),l=(!n.pattern||"/\\S+/"===n.pattern.toString()||u&&"required"===n.pattern)&&null===t?!1:r.test(t))}(!o.bFieldRequired&&!t||o.elm.prop("disabled")||o.scope.$eval(P))&&(l=!0),l||(s=!1,function(t,r,n){var i=n.message;n.altText&&n.altText.length>0&&(i=n.altText.replace("alt=","")),a(i).then(function(a){p.length>0&&q.displayOnlyLastErrorMsg?p=" "+(n&&n.params?String.format(a,n.params):a):p+=" "+(n&&n.params?String.format(a,n.params):a),b(o,t,p,s,e)})["catch"](function(){n.altText&&n.altText.length>0&&(p.length>0&&q.displayOnlyLastErrorMsg?p=" "+i:p+=" "+i,b(o,t,p,s,e))})}(m,l,n))}return l&&($(o,""),o.updateErrorMsg("",{isValid:l})),m&&(m.isValid=s,s&&(m.message="")),s}function y(t,e,r,n){var i=e.name?e.name:t.attr("name"),o=x(i,{scope:n}),l=e&&e.friendlyName?a.instant(e.friendlyName):"",s={fieldName:i,friendlyName:l,elm:t,attrs:e,ctrl:r,scope:n,isValid:!1,message:"",formName:o?o.$name:null},p=A(k,"fieldName",t.attr("name"));return p>=0?k[p]=s:k.push(s),k}function b(t,e,a,r,n){a=a.trim(),$(e,a),e&&(e.message=a),(t.validatorAttrs.preValidateFormElements||q.preValidateFormElements)&&(e&&"function"==typeof t.ctrl.$setTouched&&e.ctrl.$setTouched(),t.ctrl.$dirty===!1&&v(a,{isSubmitted:!0,isValid:r,obj:e})),n&&e&&!e.isValid?t.updateErrorMsg(a,{isValid:r}):e&&e.isValid&&$(e,"")}function $(t,e){if("undefined"!=typeof t&&null!=t){var r=t.ctrl&&t.ctrl.$name?t.ctrl.$name:t.attrs&&t.attrs.name?t.attrs.name:t.elm.attr("name"),n=x(r,t),i=A(P,"field",r);if(i>=0&&""===e)P.splice(i,1);else if(""!==e){var o=t.attrs&&t.friendlyName?a.instant(t.friendlyName):"",l={field:r,friendlyName:o,message:e,formName:n?n.$name:null};i>=0?P[i]=l:P.push(l)}if(t.scope.$validationSummary=P,n&&(n.$validationSummary=S(P,"formName",n.$name)),q&&q.controllerAs&&(q.controllerAs.$validationSummary=P,n)){var s=n.$name.indexOf(".")>=0?n.$name.split(".")[1]:n.$name;q.controllerAs[s].$validationSummary=S(P,"formName",n.$name)}return P}}function O(t,e,a){if(t)for(var r=0;r<t.length;r++)if(t[r][e]===a)return t[r];return null}function S(t,e,a){var r=[];if(t)for(var n=0;n<t.length;n++)t[n][e]===a&&r.push(t[n]);return r}function A(t,e,a){if(t)for(var r=0;r<t.length;r++)if(t[r][e]===a)return r;return-1}function E(t,e){for(var a=t.split("."),r=0,n=a.length;n>r;r++)e[a[r]]&&(e=e[a[r]]);return e}function x(t,e){for(var a=document.getElementsByName(t),r=null,n=0;n<a.length;n++){var i=a[n].form;if(i&&i.name&&(r=q&&q.controllerAs&&i.name.indexOf(".")>=0?E(i.name,e.scope):e.scope[i.name]))return"undefined"==typeof r.$name&&(r.$name=i.name),r}if(i&&i.name){var o={$name:i.name,specialNote:"Created by Angular-Validation for Isolated Scope usage"};if(q&&q.controllerAs&&i.name.indexOf(".")>=0){var l=i.name.split(".");return e.scope[l[0]][l[1]]=o}return e.scope[i.name]=o}return null}function w(t,e){var a="",r="-",n=[],i=[],o="",l="",s="";switch(e.toUpperCase()){case"EURO_LONG":case"EURO-LONG":a=t.substring(0,10),r=t.substring(2,3),n=R(a,r),s=n[0],l=n[1],o=n[2],i=t.length>8?t.substring(9).split(":"):null;break;case"UK":case"EURO":case"EURO_SHORT":case"EURO-SHORT":case"EUROPE":a=t.substring(0,8),r=t.substring(2,3),n=R(a,r),s=n[0],l=n[1],o=parseInt(n[2])<50?"20"+n[2]:"19"+n[2],i=t.length>8?t.substring(9).split(":"):null;break;case"US_LONG":case"US-LONG":a=t.substring(0,10),r=t.substring(2,3),n=R(a,r),l=n[0],s=n[1],o=n[2],i=t.length>8?t.substring(9).split(":"):null;break;case"US":case"US_SHORT":case"US-SHORT":a=t.substring(0,8),r=t.substring(2,3),n=R(a,r),l=n[0],s=n[1],o=parseInt(n[2])<50?"20"+n[2]:"19"+n[2],i=t.length>8?t.substring(9).split(":"):null;break;case"ISO":default:a=t.substring(0,10),r=t.substring(4,5),n=R(a,r),o=n[0],l=n[1],s=n[2],i=t.length>10?t.substring(11).split(":"):null}var p=i&&3===i.length?i[0]:0,d=i&&3===i.length?i[1]:0,m=i&&3===i.length?i[2]:0;return new Date(o,l-1,s,p,d,m)}function R(t,e){var a=[];switch(e){case"/":a=t.split("/");break;case".":a=t.split(".");break;case"-":default:a=t.split("-")}return a}function N(t,e,a){var r=!1;switch(t){case"<":r=a>e?!0:!1;break;case"<=":r=a>=e?!0:!1;break;case">":r=e>a?!0:!1;break;case">=":r=e>=a?!0:!1;break;case"!=":case"<>":r=e!=a?!0:!1;break;case"=":case"==":r=e==a?!0:!1;break;default:r=!1}return r}function V(){return this.replace(/^\s+|\s+$/g,"")}function T(){var t=Array.isArray(arguments[0])?arguments[0]:arguments;return this.replace(/{(\d+)}/g,function(e,a){return"undefined"!=typeof t[a]?t[a]:e})}function F(t){var e=Array.isArray(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,a){return"undefined"!=typeof e[a]?e[a]:t})}var L=!1,U=1e3,k=[],q={},M=[],P=[];t.$on("$routeChangeStart",function(){L||(q={displayOnlyLastErrorMsg:!1,preValidateFormElements:!1,isolatedScope:null,scope:null},k=[],P=[])});var j=function(t,e,a,r){this.bFieldRequired=!1,this.validators=[],this.typingLimit=U,this.scope=t,this.elm=e,this.ctrl=r,this.validatorAttrs=a,t&&t.$validationOptions&&(q=t.$validationOptions),t&&(q.isolatedScope||q.scope)&&(this.scope=q.isolatedScope?q.isolatedScope:q.scope,q=d(t.$validationOptions,q)),this.elm&&this.validatorAttrs&&this.ctrl&&this.scope&&(y(this.elm,this.validatorAttrs,this.ctrl,this.scope),this.defineValidation())};return j.prototype.arrayFindObject=O,j.prototype.defineValidation=n,j.prototype.getFormElementByName=i,j.prototype.getFormElements=o,j.prototype.getGlobalOptions=l,j.prototype.isFieldRequired=p,j.prototype.initialize=s,j.prototype.mergeObjects=d,j.prototype.removeFromValidationSummary=u,j.prototype.removeFromFormElementObjectList=m,j.prototype.setBypassRootScopeReset=c,j.prototype.setDisplayOnlyLastErrorMsg=f,j.prototype.setGlobalOptions=g,j.prototype.updateErrorMsg=v,j.prototype.validate=h,String.prototype.trim=V,String.prototype.format=T,String.format=F,j}]);
angular.module("ghiscoding.validation").factory("validationRules",[function(){function e(e){var a="undefined"!=typeof e.altText?e.altText.replace("alt=",""):null,t=e.hasOwnProperty("customRegEx")?e.customRegEx:null,s=e.hasOwnProperty("rule")?e.rule:null,r=e.hasOwnProperty("ruleParams")?e.ruleParams:null,n={};switch(s){case"alpha":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ])+$/i,message:"INVALID_ALPHA",type:"regex"};break;case"alphaSpaces":case"alpha_spaces":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ\s])+$/i,message:"INVALID_ALPHA_SPACE",type:"regex"};break;case"alphaNum":case"alpha_num":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9])+$/i,message:"INVALID_ALPHA_NUM",type:"regex"};break;case"alphaNumSpaces":case"alpha_num_spaces":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9\s])+$/i,message:"INVALID_ALPHA_NUM_SPACE",type:"regex"};break;case"alphaDash":case"alpha_dash":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9_-])+$/i,message:"INVALID_ALPHA_DASH",type:"regex"};break;case"alphaDashSpaces":case"alpha_dash_spaces":n={pattern:/^([a-zа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9\s_-])+$/i,message:"INVALID_ALPHA_DASH_SPACE",type:"regex"};break;case"betweenLen":case"between_len":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_len:1,5";n={pattern:"^.{"+_[0]+","+_[1]+"}$",message:"INVALID_BETWEEN_CHAR",params:[_[0],_[1]],type:"regex"};break;case"betweenNum":case"between_num":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_num:1,5";n={condition:[">=","<="],message:"INVALID_BETWEEN_NUM",params:[_[0],_[1]],type:"conditionalNumber"};break;case"boolean":n={pattern:/^(true|false|0|1)$/i,message:"INVALID_BOOLEAN",type:"regex"};break;case"checked":n={pattern:/^true$/i,message:"INVALID_CHECKBOX_SELECTED",type:"regex"};break;case"creditCard":case"credit_card":n={pattern:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/,message:"INVALID_CREDIT_CARD",type:"regex"};break;case"dateEuroLong":case"date_euro_long":n={pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_EURO_LONG",type:"regex"};break;case"dateEuroLongBetween":case"date_euro_long_between":case"betweenDateEuroLong":case"between_date_euro_long":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_date_euro_long:01-01-1990,31-12-2015";n={condition:[">=","<="],dateType:"EURO_LONG",params:[_[0],_[1]],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_EURO_LONG_BETWEEN",type:"conditionalDate"};break;case"dateEuroLongMax":case"date_euro_long_max":case"maxDateEuroLong":case"max_date_euro_long":n={condition:"<=",dateType:"EURO_LONG",params:[r],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_EURO_LONG_MAX",type:"conditionalDate"};break;case"dateEuroLongMin":case"date_euro_long_min":case"minDateEuroLong":case"min_date_euro_long":n={condition:">=",dateType:"EURO_LONG",params:[r],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_EURO_LONG_MIN",type:"conditionalDate"};break;case"dateEuroShort":case"date_euro_short":n={pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.]\d\d$/,message:"INVALID_DATE_EURO_SHORT",type:"regex"};break;case"dateEuroShortBetween":case"date_euro_short_between":case"betweenDateEuroShort":case"between_date_euro_short":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_date_euro_short:01-01-90,31-12-15";n={condition:[">=","<="],dateType:"EURO_SHORT",params:[_[0],_[1]],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.]\d\d$/,message:"INVALID_DATE_EURO_SHORT_BETWEEN",type:"conditionalDate"};break;case"dateEuroShortMax":case"date_euro_short_max":case"maxDateEuroShort":case"max_date_euro_short":n={condition:"<=",dateType:"EURO_SHORT",params:[r],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.]\d\d$/,message:"INVALID_DATE_EURO_SHORT_MAX",type:"conditionalDate"};break;case"dateEuroShortMin":case"date_euro_short_min":case"minDateEuroShort":case"min_date_euro_short":n={condition:">=",dateType:"EURO_SHORT",params:[r],pattern:/^(0[1-9]|[12][0-9]|3[01])[-\/\.](0[1-9]|1[012])[-\/\.]\d\d$/,message:"INVALID_DATE_EURO_SHORT_MIN",type:"conditionalDate"};break;case"dateIso":case"date_iso":n={pattern:/^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/,message:"INVALID_DATE_ISO",type:"regex"};break;case"dateIsoBetween":case"date_iso_between":case"betweenDateIso":case"between_date_iso":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_date_iso:1990-01-01,2000-12-31";n={condition:[">=","<="],dateType:"ISO",params:[_[0],_[1]],pattern:/^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/,message:"INVALID_DATE_ISO_BETWEEN",type:"conditionalDate"};break;case"dateIsoMax":case"date_iso_max":case"maxDateIso":case"max_date_iso":n={condition:"<=",dateType:"ISO",params:[r],pattern:/^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/,message:"INVALID_DATE_ISO_MAX",type:"conditionalDate"};break;case"dateIsoMin":case"date_iso_min":case"minDateIso":case"min_date_iso":n={condition:">=",dateType:"ISO",params:[r],pattern:/^(19|20)\d\d([-])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/,message:"INVALID_DATE_ISO_MIN",type:"conditionalDate"};break;case"dateUsLong":case"date_us_long":n={pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_US_LONG",type:"regex"};break;case"dateUsLongBetween":case"date_us_long_between":case"betweenDateUsLong":case"between_date_us_long":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_date_us_long:01/01/1990,12/31/2015";n={condition:[">=","<="],dateType:"US_LONG",params:[_[0],_[1]],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_US_LONG_BETWEEN",type:"conditionalDate"};break;case"dateUsLongMax":case"date_us_long_max":case"maxDateUsLong":case"max_date_us_long":n={condition:"<=",dateType:"US_LONG",params:[r],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_US_LONG_MAX",type:"conditionalDate"};break;case"dateUsLongMin":case"date_us_long_min":case"minDateUsLong":case"min_date_us_long":n={condition:">=",dateType:"US_LONG",params:[r],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.](19|20)\d\d$/,message:"INVALID_DATE_US_LONG_MIN",type:"conditionalDate"};break;case"dateUsShort":case"date_us_short":n={pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.]\d\d$/,message:"INVALID_DATE_US_SHORT",type:"regex"};break;case"dateUsShortBetween":case"date_us_short_between":case"betweenDateUsShort":case"between_date_us_short":var _=r.split(",");if(2!==_.length)throw"This validation must include exactly 2 params separated by a comma (,) ex.: between_date_us_short:01/01/90,12/31/15";n={condition:[">=","<="],dateType:"US_SHORT",params:[_[0],_[1]],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.]\d\d$/,message:"INVALID_DATE_US_SHORT_BETWEEN",type:"conditionalDate"};break;case"dateUsShortMax":case"date_us_short_max":case"maxDateUsShort":case"max_date_us_short":n={condition:"<=",dateType:"US_SHORT",params:[r],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.]\d\d$/,message:"INVALID_DATE_US_SHORT_MAX",type:"conditionalDate"};break;case"dateUsShortMin":case"date_us_short_min":case"minDateUsShort":case"min_date_us_short":n={condition:">=",dateType:"US_SHORT",params:[r],pattern:/^(0[1-9]|1[012])[-\/\.](0[1-9]|[12][0-9]|3[01])[-\/\.]\d\d$/,message:"INVALID_DATE_US_SHORT_MIN",type:"conditionalDate"};break;case"email":n={pattern:/^[-\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9#~!$%^&*_=+\/`\|}{\'?]+(\.[-\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9#~!$%^&*_=+\/`\|}{\'?]+)*@([\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9_][-\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9_]*(\.[-\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ0-9_]+)*([\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ]+)|(\.[\wа-яàáâãäåæçèéêëœìíïîðòóôõöøùúûñüýÿßÞďđ]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,message:"INVALID_EMAIL",type:"regex"};break;case"exactLen":case"exact_len":n={pattern:"^.{"+r+"}$",message:"INVALID_EXACT_LEN",params:[r],type:"regex"};break;case"float":n={pattern:/^\d*\.{1}\d+$/,message:"INVALID_FLOAT",type:"regex"};break;case"floatSigned":case"float_signed":n={pattern:/^[-+]?\d*\.{1}\d+$/,message:"INVALID_FLOAT_SIGNED",type:"regex"};break;case"iban":n={pattern:/^[a-zA-Z]{2}\d{2}\s?([0-9a-zA-Z]{4}\s?){4}[0-9a-zA-Z]{2}$/i,message:"INVALID_IBAN",type:"regex"};break;case"int":case"integer":n={pattern:/^\d+$/,message:"INVALID_INTEGER",type:"regex"};break;case"intSigned":case"integerSigned":case"int_signed":case"integer_signed":n={pattern:/^[+-]?\d+$/,message:"INVALID_INTEGER_SIGNED",type:"regex"};break;case"ipv4":n={pattern:/^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}$/,message:"INVALID_IPV4",type:"regex"};break;case"ipv6":n={pattern:/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/i,message:"INVALID_IPV6",type:"regex"};break;case"match":var e=r.split(",");n={message:"INVALID_INPUT_MATCH",params:e,type:"match"};break;case"maxLen":case"max_len":n={pattern:"^.{0,"+r+"}$",message:"INVALID_MAX_CHAR",params:[r],type:"regex"};break;case"maxNum":case"max_num":n={condition:"<=",message:"INVALID_MAX_NUM",params:[r],type:"conditionalNumber"};break;case"minLen":case"min_len":n={pattern:"^.{"+r+",}$",message:"INVALID_MIN_CHAR",params:[r],type:"regex"};break;case"minNum":case"min_num":n={condition:">=",message:"INVALID_MIN_NUM",params:[r],type:"conditionalNumber"};break;case"numeric":n={pattern:/^\d*\.?\d+$/,message:"INVALID_NUMERIC",type:"regex"};break;case"numericSigned":case"numeric_signed":n={pattern:/^[-+]?\d*\.?\d+$/,message:"INVALID_NUMERIC_SIGNED",type:"regex"};break;case"pattern":case"regex":n={pattern:t.pattern,message:"INVALID_PATTERN",params:[t.message],type:"regex"};break;case"remote":n={message:"",params:[r],type:"remote"};break;case"required":n={pattern:/\S+/,message:"INVALID_REQUIRED",type:"regex"};break;case"url":n={pattern:/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i,message:"INVALID_URL",type:"regex"};break;case"time":n={pattern:/^([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/,message:"INVALID_TIME",type:"regex"}}return n.altText=a,n}var a={getElementValidators:e};return a}]);
angular.module("ghiscoding.validation").service("validationService",["$interpolate","$timeout","validationCommon",function(e,o,t){function n(t,n,a){var i=this,m={};if("string"==typeof t&&"string"==typeof n?(m.elmName=t,m.rules=n,m.friendlyName="string"==typeof a?a:""):m=t,"object"!=typeof m||!m.hasOwnProperty("elmName")||!m.hasOwnProperty("rules")||!m.hasOwnProperty("scope")&&"undefined"==typeof i.validationAttrs.scope)throw"Angular-Validation-Service requires at least the following 3 attributes: {elmName, rules, scope}";var r=m.scope?m.scope:i.validationAttrs.scope;if(m.elm=angular.element(document.querySelector('[name="'+m.elmName+'"]')),"object"!=typeof m.elm||0===m.elm.length)return i;if(new RegExp("{{(.*?)}}").test(m.elmName)&&(m.elmName=e(m.elmName)(r)),m.name=m.elmName,i.validationAttrs.isolatedScope){var l=r.$validationOptions||null;r=i.validationAttrs.isolatedScope,l&&(r.$validationOptions=l)}m.elm.bind("blur",v=function(e){var o=i.commonObj.getFormElementByName(m.elmName);o&&!o.isValidationCancelled&&(i.commonObj.initialize(r,m.elm,m,m.ctrl),s(i,e.target.value,10))}),m=i.commonObj.mergeObjects(i.validationAttrs,m),p(i,r,m),m.elm.on("$destroy",function(){var e=i.commonObj.getFormElementByName(i.commonObj.ctrl.$name);e&&(u(i,e),i.commonObj.removeFromValidationSummary(m.name))});var c=r.$watch(m.elmName,function(e,t){return void 0===e&&void 0!==t?(o.cancel(i.timer),void i.commonObj.ctrl.$setValidity("validation",i.commonObj.validate("",!0))):(m.ctrl=angular.element(m.elm).controller("ngModel"),m.value=e,i.commonObj.initialize(r,m.elm,m,m.ctrl),void s(i,e))},!0);return y.push({elmName:m.elmName,watcherHandler:c}),i}function a(e){var o=this,t="",n=!0;if("undefined"==typeof e||"undefined"==typeof e.$validationSummary)throw"checkFormValidity() requires a valid Angular Form or $scope/vm object passed as argument to work properly, for example:: fn($scope) OR fn($scope.form1) OR fn(vm) OR fn(vm.form1)";for(var a=0,i=e.$validationSummary.length;i>a;a++)if(n=!1,t=e.$validationSummary[a].field){var m=o.commonObj.getFormElementByName(t);m&&m.elm&&m.elm.length>0&&("function"==typeof m.ctrl.$setTouched&&m.ctrl.$setTouched(),o.commonObj.updateErrorMsg(e.$validationSummary[a].message,{isSubmitted:!0,isValid:m.isValid,obj:m}))}return n}function i(e){var o=this;if("undefined"==typeof e||"undefined"==typeof e.$validationSummary)throw"clearInvalidValidatorsInSummary() requires a valid Angular Form or $scope/vm object passed as argument to work properly, for example:: fn($scope) OR fn($scope.form1) OR fn(vm) OR fn(vm.form1)";for(var t=[],n=0,a=e.$validationSummary.length;a>n;n++)t.push(e.$validationSummary[n].field);for(n=0,a=t.length;a>n;n++)t[n]&&(o.commonObj.removeFromFormElementObjectList(t[n]),o.commonObj.removeFromValidationSummary(t[n],e.$validationSummary))}function m(e,o){var t,n=this;if("undefined"==typeof e||"undefined"==typeof e.$validationSummary)throw"removeValidator() only works with Validation that were defined by the Service (not by the Directive) and requires a valid Angular Form or $scope/vm object passed as argument to work properly, for example:: fn($scope) OR fn($scope.form1) OR fn(vm) OR fn(vm.form1)";if(o instanceof Array)for(var a=0,i=o.length;i>a;a++)t=n.commonObj.getFormElementByName(o[a]),t.elm.removeAttr("validation"),f(n,t,e.$validationSummary);else o instanceof Object&&o.formElmObj?(t=o.formElmObj,t.elm.removeAttr("validation"),f(o.self,t,e.$validationSummary)):(t=n.commonObj.getFormElementByName(o),t.elm.removeAttr("validation"),f(n,t,e.$validationSummary));return n}function r(e,o){var t,n=this,o=o||{},a="undefined"!=typeof o.removeAllValidators?o.removeAllValidators:!1,i="undefined"!=typeof o.emptyAllInputValues?o.emptyAllInputValues:!1;if("undefined"==typeof e||"undefined"==typeof e.$name)throw"resetForm() requires a valid Angular Form object passed as argument to work properly (ex.: $scope.form1).";var r=n.commonObj.getFormElements(e.$name);if(r instanceof Array)for(var l=0,c=r.length;c>l;l++)t=r[l],i&&t.elm.val(null),a?m(e,{self:n,formElmObj:t}):("function"==typeof t.ctrl.$setUntouched&&t.ctrl.$setUntouched(),t.ctrl.$setPristine(),n.commonObj.updateErrorMsg("",{isValid:!1,obj:t}))}function l(e){var o=this,t="boolean"==typeof e?e:!0;o.commonObj.setBypassRootScopeReset(t)}function c(e){var o=this,t="boolean"==typeof e?e:!0;o.commonObj.setDisplayOnlyLastErrorMsg(t)}function d(e){var o=this;return o.validationAttrs=e,o.commonObj.setGlobalOptions(e),o}function s(e,t,n){var a="undefined"!=typeof n?n:e.commonObj.typingLimit,i=e.commonObj.getFormElementByName(e.commonObj.ctrl.$name);return e.commonObj.validate(t,!1),e.commonObj.isFieldRequired()||""!==t&&null!==t&&"undefined"!=typeof t?(i.isValidationCancelled=!1,(e.commonObj.isFieldRequired()||t)&&e.commonObj.ctrl.$setValidity("validation",!1),""!==t&&"undefined"!=typeof t||"NUMBER"!==e.commonObj.elm.prop("type").toUpperCase()?"SELECT"===e.commonObj.elm.prop("tagName").toUpperCase()?(e.commonObj.ctrl.$setValidity("validation",e.commonObj.validate(t,!0)),t):("undefined"!=typeof t&&(e.commonObj.updateErrorMsg(""),o.cancel(e.timer),e.timer=o(function(){e.commonObj.scope.$evalAsync(e.commonObj.ctrl.$setValidity("validation",e.commonObj.validate(t,!0)))},a)),t):(o.cancel(e.timer),e.commonObj.ctrl.$setValidity("validation",e.commonObj.validate(t,!0)),t)):(u(e,i),t)}function u(e,t){var n=t&&t.ctrl?t.ctrl:e.commonObj.ctrl;if(t&&(t.isValidationCancelled=!0),o.cancel(self.timer),n.$setValidity("validation",!0),e.commonObj.updateErrorMsg("",{isValid:!0,obj:t}),"function"==typeof v){var a=t&&t.elm?t.elm:e.commonObj.elm;a.unbind("blur",v)}}function f(e,o,t){var n=e.commonObj.scope?e.commonObj.scope:o.scope?o.scope:null;if("undefined"==typeof n)throw"removeValidator() requires a valid $scope object passed but unfortunately could not find it.";var a=e.commonObj.arrayFindObject(y,"elmName",o.fieldName);a&&a.watcherHandler(),o.isValidationCancelled=!0,o.isValid=!0,o.attrs.validation="",u(e,o),"function"==typeof o.ctrl.$setUntouched&&o.ctrl.$setUntouched(),e.commonObj.scope=n,o.ctrl.$setPristine(),e.commonObj.removeFromValidationSummary(o.fieldName,t)}function p(e,t,n){t.$watch(function(){return"undefined"==typeof n.elm.attr("ng-disabled")?null:t.$eval(n.elm.attr("ng-disabled"))},function(a){if("undefined"==typeof a||null===a)return null;n.ctrl=angular.element(n.elm).controller("ngModel"),e.commonObj.initialize(t,n.elm,n,n.ctrl);var i=e.commonObj.getFormElementByName(n.name);o(function(){if(a)n.ctrl.$setValidity("validation",!0),e.commonObj.updateErrorMsg("",{isValid:!0,obj:i}),e.commonObj.removeFromValidationSummary(n.name);else{var o=n.ctrl.$viewValue||"";e.commonObj.initialize(t,n.elm,n,n.ctrl),n.ctrl.$setValidity("validation",e.commonObj.validate(o,!1)),i&&(i.isValidationCancelled=!1),n.elm.bind("blur",v=function(o){i&&!i.isValidationCancelled&&s(e,o.target.value,10)})}},0,!1),a&&("function"==typeof n.ctrl.$setUntouched&&n.ctrl.$setUntouched(),n.ctrl.$setValidity("validation",!0),e.commonObj.removeFromValidationSummary(n.name))})}var v,y=[],b=function(e){this.isValidationCancelled=!1,this.timer=null,this.validationAttrs={},this.commonObj=new t,e&&this.setGlobalOptions(e)};return b.prototype.addValidator=n,b.prototype.checkFormValidity=a,b.prototype.removeValidator=m,b.prototype.resetForm=r,b.prototype.setBypassRootScopeReset=l,b.prototype.setDisplayOnlyLastErrorMsg=c,b.prototype.setGlobalOptions=d,b.prototype.clearInvalidValidatorsInSummary=i,b}]);